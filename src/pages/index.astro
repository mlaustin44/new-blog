---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";

const posts = await getCollection('blog', ({ data }) => {
	return data.draft !== true;
})

posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="blog">
	<h1>Blog</h1>
	<ul>
		{posts.map(post => (
			<li>
				<a href={`/blog/${post.slug}`}>
					{post.data.title}
				</a>
				<time>{post.data.date.toLocaleDateString()}</time>
			</li>
		))}
	</ul>
</BaseLayout>